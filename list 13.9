//list 13.9
//스트림 상태 검사

#include <iostream>
#include <fstream>
#include <string>
using namespace std;

void showState(const fstream&);

int main()
{
	fstream inout;

	//출력파일 생성
	inout.open("temp.txt", ios::out);
	inout << "Dallas";
	cout << "Normal operation (no errors)" << endl;

	showState(inout);
	inout.close();

	//입력 파일 생성
	inout.open("temp.txt", ios::in);

	//문자열 읽기
	string city;
	inout >> city;
	cout << "End of file (no errors)" << endl;
	showState(inout);

	inout.close();
	//파일을 닫은 후 읽기 시도
	inout >> city;
	cout << "Bad operation (errors)" << endl;
	showState(inout);

	return 0;
}

void showState(const fstream& stream)
{
	cout << "Stream status: " << endl;
	cout << " eof(): " << stream.eof() << endl;
	cout << " fail(): " << stream.fail() << endl;
	cout << " bad(): " << stream.bad() << endl;
	cout << " good(): " << stream.good() << endl;
	cout << "" << endl;
}
